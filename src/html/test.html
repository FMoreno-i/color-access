<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ColorAccess - Test de Daltonismo</title>

    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/color-modes.css" />

    <style>
        .test-card { max-width: 820px; }
        .test-top { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
        .progress { font-weight: 800; color: var(--muted-text, rgba(0,0,0,0.6)); }
        .plate-wrap { display:flex; justify-content:center; margin: 14px 0; }
        canvas#plate { width: min(420px, 92vw); height: min(420px, 92vw); border-radius: 18px; border: 1px solid var(--border-color, rgba(0,0,0,0.15)); background: var(--card-bg, #fff); }
        .answers { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
        .answer-btn { padding: 14px 14px; border-radius: 16px; border: 1px solid var(--border-color, rgba(0,0,0,0.15)); background: var(--card-bg,#fff); cursor:pointer; font-weight:900; }
        .answer-btn:hover { border-color: var(--border-strong, rgba(0,0,0,0.22)); background: rgba(0,0,0,0.02); }
        .answer-btn:active { transform: scale(0.99); }
        .test-actions { display:flex; gap:12px; margin-top: 14px; }
        .hint { color: var(--muted-text, rgba(0,0,0,0.65)); font-size: 0.95rem; }
        .result-box { margin-top: 12px; }
        .pill { display:inline-block; padding: 8px 12px; border-radius: 999px; font-weight:900; border:1px solid var(--border-strong, rgba(0,0,0,0.2)); }
        @media (max-width: 520px){ .answers{ grid-template-columns:1fr; } }
    </style>
</head>

<body class="color-mode-normal">
<div class="container">
    <header class="header header-main">
        <div class="mainbar">
            <div class="mainbar-left">
                <button class="icon-btn" id="backBtn" type="button" aria-label="Volver">
                    <svg viewBox="0 0 24 24" width="26" height="26" aria-hidden="true">
                        <path d="M15.5 19 8.5 12l7-7 1.5 1.5L11.5 12l5.5 5.5L15.5 19Z"></path>
                    </svg>
                </button>
                <h1 class="main-title">Test de Daltonismo</h1>
            </div>
            <button class="icon-btn" id="homeBtn" type="button" aria-label="Ir al inicio">
                <svg viewBox="0 0 24 24" width="26" height="26" aria-hidden="true">
                    <path d="M12 3 2.5 11h2v9h6v-6h3v6h6v-9h2L12 3Z"></path>
                </svg>
            </button>
        </div>
    </header>

    <main class="main-content">
        <div class="login-card test-card">
            <div class="test-top">
                <h2 id="title">Prueba rápida</h2>
                <div class="progress" id="progress">0/0</div>
            </div>

            <p class="hint" id="subtitle">
                Mira la placa y selecciona lo que ves. Si no distingues nada, elige “No veo nada”.
            </p>

            <div class="plate-wrap">
                <canvas id="plate" width="420" height="420" aria-label="Placa del test"></canvas>
            </div>

            <div class="answers" id="answers"></div>

            <div class="test-actions">
                <button class="secondary-btn" id="prevBtn" type="button">Atrás</button>
                <button class="login-button" id="nextBtn" type="button">Siguiente</button>
            </div>

            <div class="result-box" id="resultBox" style="display:none;">
                <div class="message message-success">
                    Resultado estimado: <span class="pill" id="resultPill">—</span>
                </div>
                <p class="hint" id="resultHint"></p>

                <div class="panel-actions" style="margin-top:10px;">
                    <button class="secondary-btn" id="saveBtn" type="button">Guardar y volver</button>
                    <button class="ghost-btn" id="restartBtn" type="button">Repetir test</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2026 ColorAccess - Accesibilidad visual</p>
    </footer>
</div>

<script src="../js/color-manager.js"></script>
<script src="../js/test.js"></script>
</body>
</html>
